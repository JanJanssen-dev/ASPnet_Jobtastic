@model List<JobPostingModel>

@{
    ViewData["Title"] = "Deine Inserate";
}
<section class="p-4 bg-light rounded shadow-sm">
    <div class="mt-6 p-5 bg-primary text-white rounded text-center">
        <h2>Deine Inserate</h2>
    </div>

    <div class="text-end">
        <a class="mt-3 btn btn-outline-primary" asp-controller="JobPosting" asp-action="CreateJob">neuen Job anlegen</a>
    </div>

    <section class="mt-3 p-4 bg-light rounded shadow-sm">
        <table class="table">
            <thead>
                <tr>
                    <th>Logo</th>
                    <th>Job Titel</th>
                    <th>Company</th>
                    <th>ASP</th>
                    <th>Start am</th>
                    <th>Bearbeiten</th>
                    <th>Löschen</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model)
                {
                    <tr>
                        <td>
                            @if (item.CompanyImage != null && item.CompanyImage.Length > 0)
                            {
                                var base64 = Convert.ToBase64String(item.CompanyImage);
                                <img src="data:image/png;base64,@base64" alt="Logo" style="max-width: 80px; max-height: 40px;" />
                            }
                        </td>
                        <td class="align-middle">@item.JobTitle</td>
                        <td class="align-middle">@item.CompanyName</td>
                        <td class="align-middle">@item.ContactName</td>
                        <td class="align-middle">@item.StartDate.ToShortDateString()</td>
                        <td class="align-middle">
                            <a asp-action="EditJob" asp-route-id="@item.Id" class="btn btn-primary btn-sm">Bearbeiten</a>
                        </td>
                        <td class="align-middle">
                            <form asp-action="DeleteJob" asp-route-id="@item.Id" method="post"
                                  onsubmit="return confirm('Möchten Sie diesen Job wirklich löschen?');">
                                <button type="submit" class="btn btn-danger btn-sm">Löschen</button>
                            </form>
                        </td>
                    </tr>
                }
            </tbody>

        </table>
</section>
    <div class="text-end">
        <a class="mt-3 btn btn-outline-primary" asp-controller="JobPosting" asp-action="CreateJob">neuen Job anlegen</a>
    </div>
</section>

